2020-04-03 11:34:29:893 SLS INFO: [0x7ff0aec029a0]CSLSManager::start, new m_list_role=0x7ff0aed00050.
2020-04-03 11:34:29:894 SLS INFO: [0x1102eb000]CSLSListener::start...
2020-04-03 11:34:29:894 SLS INFO: [0x1102eb000]CSLSListener::init_conf_app, m_back_log=100, m_idle_streams_timeout=10.
2020-04-03 11:34:29:894 SLS INFO: [0x1102eb000]CSLSListener::init_conf_app, add app push 'uplive.sls.com/live'.
2020-04-03 11:34:29:894 SLS INFO: [0x1102eb000]CSLSListener::init_conf_app, add app live='live.sls.com/live', app push='uplive.sls.com/live'.
2020-04-03 11:34:29:894 SLS INFO: [0x1102eb000]CSLSListener::init_conf_app, add app live='live-1.sls.com/live', app push='uplive.sls.com/live'.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0b0000000]CSLSSrt::libsrt_setup, fd=1048655853.
2020-04-03 11:34:29:895 SLS INFO: [0x1102eb000]CSLSListener::start, libsrt_setup ok.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0b0000000]CSLSSrt::libsrt_listen, ok, fd=1048655853, at port=8080.
2020-04-03 11:34:29:895 SLS INFO: [0x1102eb000]CSLSListener::start, m_list_role=0x7ff0aed00050.
2020-04-03 11:34:29:895 SLS INFO: [0x1102eb000]CSLSListener::start, push to m_list_role=0x7ff0aed00050.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0aec029a0]CSLSManager::start, init listeners, count=1.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0af01c800]CSLSGroup::start, worker_number=0.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0af01c800]CSLSEpollThread::work, begin th_id=0.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0af01c800]CSLSThread::start, pthread_create ok, m_th_id=123145466294272.
2020-04-03 11:34:29:895 SLS INFO: [0x7ff0aec029a0]CSLSManager::start, init worker, count=1.
2020-04-03 11:34:29:906 SLS INFO: [0x1102eb000]CSLSRole::add_to_epoll, listener, sock=1048655853, m_is_write=0, ret=0.
2020-04-03 11:34:29:906 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_new_role, worker_number=0, listener=0x1102eb000, add_to_epoll fd=1048655853, role_map.size=1.
2020-04-03 11:34:39:071 SLS INFO: [0x7ff0b0000000]CSLSSrt::libsrt_accept ok, new sock=1048655852, 127.0.0.1:50576.
2020-04-03 11:34:39:071 SLS INFO: [0x1102eb000]CSLSListener::handler, new client[127.0.0.1:50576], fd=1048655852.
2020-04-03 11:34:39:071 SLS INFO: [0x1102eb000]CSLSListener::handler, [127.0.0.1:50576], sid 'uplive.sls.com/live/test123'
2020-04-03 11:34:39:071 SLS INFO: [0x1102eb000]CSLSListener::handler, new pub=0x1103a2000, key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:34:39:071 SLS INFO: [0x7ff0aed00478]CSLSMapData::add ok, key='uplive.sls.com/live/test123'.
2020-04-03 11:34:39:071 SLS INFO: [0x7ff0aed00588]CSLSMapPublisher::set_push_2_pushlisher, ok, publisher=0x1103a2000, app_streamname=uplive.sls.com/live/test123, m_map_push_2_pushlisher.size()=1.
2020-04-03 11:34:39:071 SLS INFO: [0x1102eb000]CSLSListener::handler, new publisher[127.0.0.1:50576], key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:34:39:071 SLS INFO: [0x7ff0aed007c8]CSLSMapRelay::add_relay_manager, no relay conf info, app_uplive=uplive.sls.com/live, stream_name=test123.
2020-04-03 11:34:39:071 SLS INFO: [0x1102eb000]CSLSListener::handler, m_map_pusher->add_relay_manager failed, new role[127.0.0.1:50576], key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:34:39:071 SLS INFO: [0x1103a2000]CSLSRole::add_to_epoll, publisher, sock=1048655852, m_is_write=0, ret=0.
2020-04-03 11:34:39:071 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_new_role, worker_number=0, publisher=0x1103a2000, add_to_epoll fd=1048655852, role_map.size=2.
2020-04-03 11:34:45:923 SLS ERROR: CSLSSrt::libsrt_neterrno, err=2001, Connection was broken.
2020-04-03 11:34:45:923 SLS WARNING: [0x7ff0af034000]CSLSSrt::libsrt_read failed, sock=1048655852, ret=-1, err_no=2001.
2020-04-03 11:34:45:923 SLS ERROR: [0x1103a2000]CSLSRole::handler_read_data, libsrt_read failure, n=-1.
2020-04-03 11:34:45:923 SLS INFO: [0x1103a2000]CSLSRole::invalid_srt, close sock=1048655852, m_state=1.
2020-04-03 11:34:45:923 SLS INFO: [0x7ff0af034000]CSLSSrt::libsrt_close, fd=1048655852.
2020-04-03 11:34:45:923 SLS ERROR: [0x1103a2000]CSLSRole::handler_read_data, m_srt is null.
2020-04-03 11:34:45:923 SLS INFO: [0x1103a2000]CSLSRole::get_state, get_sock_state, ret=-16777216, call invalid_srt.
2020-04-03 11:34:45:923 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_invalid_sock, worker_number=0, publisher=0x1103a2000, invalid sock=0, state=2, role_map.size=2.
2020-04-03 11:34:45:923 SLS INFO: [0x7ff0aed00478]CSLSMapData::remove, key='uplive.sls.com/live/test123' delete array_data=0x7ff0aec04410.
2020-04-03 11:34:45:923 SLS INFO: [0x1103a2000]CSLSPublisher::uninit, removed publisher from m_map_data, ret=0.
2020-04-03 11:34:45:923 SLS INFO: [0x7ff0aed00588]CSLSMapPublisher::remove, publisher=0x1103a2000, live_key=uplive.sls.com/live/test123.
2020-04-03 11:34:45:923 SLS INFO: [0x1103a2000]CSLSPublisher::uninit, removed publisher from m_map_publisher, ret=0.
2020-04-03 11:34:45:923 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_invalid_sock, worker_number=0, publisher=0x1103a2000, delete.
2020-04-03 11:34:46:650 SLS INFO: exit, stop srt live server...
2020-04-03 11:34:46:650 SLS INFO: [0x7ff0aec029a0]CSLSManager::stop.
2020-04-03 11:34:46:651 SLS INFO: [0x1102eb000]CSLSListener::stop.
2020-04-03 11:34:46:651 SLS INFO: [0x1102eb000]CSLSRole::remove_from_epoll, listener, sock=1048655853, ret=0.
2020-04-03 11:34:46:651 SLS INFO: [0x1102eb000]CSLSRole::invalid_srt, close sock=1048655853, m_state=0.
2020-04-03 11:34:46:651 SLS INFO: [0x7ff0b0000000]CSLSSrt::libsrt_close, fd=1048655853.
2020-04-03 11:34:46:651 SLS INFO: [0x7ff0af01c800]CSLSGroup::stop, worker_number=0.
2020-04-03 11:34:46:651 SLS INFO: [0x7ff0af01c800]CSLSThread::stop, m_th_id=123145466294272.
2020-04-03 11:34:46:653 SLS INFO: [0x1102eb000]CSLSRole::get_state, get_sock_state, ret=-16777216, call invalid_srt.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_invalid_sock, worker_number=0, listener=0x1102eb000, invalid sock=0, state=2, role_map.size=1.
2020-04-03 11:34:46:653 SLS INFO: [0x1102eb000]CSLSListener::stop.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSGroup::check_invalid_sock, worker_number=0, listener=0x1102eb000, delete.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSGroup::clear, worker_number=0, role_map.size=0.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSEpollThread::work, end th_id=123145466294272.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSGroup::clear, worker_number=0, role_map.size=0.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSGroup::stop, m_list_wait_http_role.clear, worker_number=0.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0af01c800]CSLSEpollThread::work, srt_epoll_release ok, m_th_id=0.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0aed00588]CSLSMapPublisher::clear.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0aed006b8]CSLSMapRelay::clear.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0aed007c8]CSLSMapRelay::clear.
2020-04-03 11:34:46:653 SLS INFO: [0x7ff0aec029a0]CSLSManager::stop, release rolelist, size=0.
2020-04-03 11:34:46:653 SLS INFO: exit, release sls_manager ok.
2020-04-03 11:34:46:653 SLS INFO: exit, release reload_manager_list begin，count=0.
2020-04-03 11:34:46:653 SLS INFO: exit, release reload_manager_list ok.
2020-04-03 11:34:46:653 SLS INFO: exit, release http_stat_client.
2020-04-03 11:34:46:653 SLS INFO: exit, uninit srt .
2020-04-03 11:34:46:662 SLS INFO: exit, close conf.
2020-04-03 11:35:10:910 SLS INFO: [0x7ff47e5001a0]CSLSManager::start, new m_list_role=0x7ff47e700220.
2020-04-03 11:35:10:910 SLS INFO: [0x106d5f000]CSLSListener::start...
2020-04-03 11:35:10:910 SLS INFO: [0x106d5f000]CSLSListener::init_conf_app, m_back_log=100, m_idle_streams_timeout=10.
2020-04-03 11:35:10:910 SLS INFO: [0x106d5f000]CSLSListener::init_conf_app, add app push 'uplive.sls.com/live'.
2020-04-03 11:35:10:910 SLS INFO: [0x106d5f000]CSLSListener::init_conf_app, add app live='live.sls.com/live', app push='uplive.sls.com/live'.
2020-04-03 11:35:10:910 SLS INFO: [0x106d5f000]CSLSListener::init_conf_app, add app live='live-1.sls.com/live', app push='uplive.sls.com/live'.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e81c800]CSLSSrt::libsrt_setup, fd=115487778.
2020-04-03 11:35:10:911 SLS INFO: [0x106d5f000]CSLSListener::start, libsrt_setup ok.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e81c800]CSLSSrt::libsrt_listen, ok, fd=115487778, at port=8080.
2020-04-03 11:35:10:911 SLS INFO: [0x106d5f000]CSLSListener::start, m_list_role=0x7ff47e700220.
2020-04-03 11:35:10:911 SLS INFO: [0x106d5f000]CSLSListener::start, push to m_list_role=0x7ff47e700220.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e5001a0]CSLSManager::start, init listeners, count=1.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e824200]CSLSGroup::start, worker_number=0.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e824200]CSLSThread::start, pthread_create ok, m_th_id=123145556434944.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e5001a0]CSLSManager::start, init worker, count=1.
2020-04-03 11:35:10:911 SLS INFO: [0x7ff47e824200]CSLSEpollThread::work, begin th_id=123145556434944.
2020-04-03 11:35:10:923 SLS INFO: [0x106d5f000]CSLSRole::add_to_epoll, listener, sock=115487778, m_is_write=0, ret=0.
2020-04-03 11:35:10:923 SLS INFO: [0x7ff47e824200]CSLSGroup::check_new_role, worker_number=0, listener=0x106d5f000, add_to_epoll fd=115487778, role_map.size=1.
2020-04-03 11:35:14:516 SLS INFO: [0x7ff47e81c800]CSLSSrt::libsrt_accept ok, new sock=115487777, 127.0.0.1:53232.
2020-04-03 11:35:14:516 SLS INFO: [0x106d5f000]CSLSListener::handler, new client[127.0.0.1:53232], fd=115487777.
2020-04-03 11:35:14:516 SLS INFO: [0x106d5f000]CSLSListener::handler, [127.0.0.1:53232], sid 'uplive.sls.com/live/test123'
2020-04-03 11:35:14:516 SLS INFO: [0x106d5f000]CSLSListener::handler, new pub=0x106e16000, key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:35:14:516 SLS INFO: [0x7ff47e500478]CSLSMapData::add ok, key='uplive.sls.com/live/test123'.
2020-04-03 11:35:14:516 SLS INFO: [0x7ff47e500588]CSLSMapPublisher::set_push_2_pushlisher, ok, publisher=0x106e16000, app_streamname=uplive.sls.com/live/test123, m_map_push_2_pushlisher.size()=1.
2020-04-03 11:35:14:516 SLS INFO: [0x106d5f000]CSLSListener::handler, new publisher[127.0.0.1:53232], key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:35:14:516 SLS INFO: [0x7ff47e700118]CSLSMapRelay::add_relay_manager, no relay conf info, app_uplive=uplive.sls.com/live, stream_name=test123.
2020-04-03 11:35:14:516 SLS INFO: [0x106d5f000]CSLSListener::handler, m_map_pusher->add_relay_manager failed, new role[127.0.0.1:53232], key_stream_name=uplive.sls.com/live/test123.
2020-04-03 11:35:14:516 SLS INFO: [0x106e16000]CSLSRole::add_to_epoll, publisher, sock=115487777, m_is_write=0, ret=0.
2020-04-03 11:35:14:516 SLS INFO: [0x7ff47e824200]CSLSGroup::check_new_role, worker_number=0, publisher=0x106e16000, add_to_epoll fd=115487777, role_map.size=2.
2020-04-03 11:35:14:550 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, '/tmp/mov/sls/8080/uplive.sls.com/live/test123' exist.

2020-04-03 11:35:14:552 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, create ts file='/tmp/mov/sls/8080/uplive.sls.com/live/test123/1585884914.ts', fd=6.
2020-04-03 11:35:24:562 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, '/tmp/mov/sls/8080/uplive.sls.com/live/test123' exist.

2020-04-03 11:35:24:562 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, close ts file='1585884914.ts', fd=6.
2020-04-03 11:35:24:564 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, create vod file='/tmp/mov/sls/8080/uplive.sls.com/live/test123/vod-1585884924.m3u8.extinfo', fd=6.
2020-04-03 11:35:24:564 SLS INFO: [0x106e16000]CSLSRole::check_hls_file, create ts file='/tmp/mov/sls/8080/uplive.sls.com/live/test123/1585884924.ts', fd=7.
2020-04-03 11:35:27:786 SLS INFO: [0x106e16000]CSLSRole::get_state, get_sock_state, ret=6, call invalid_srt.
2020-04-03 11:35:27:786 SLS ERROR: CSLSSrt::libsrt_neterrno, err=6003, Non-blocking call failure: transmission timed out.
2020-04-03 11:35:27:786 SLS INFO: [0x106e16000]CSLSRole::invalid_srt, close sock=115487777, m_state=2.
2020-04-03 11:35:27:786 SLS INFO: [0x7ff47e826400]CSLSSrt::libsrt_close, fd=115487777.
2020-04-03 11:35:27:786 SLS INFO: [0x7ff47e824200]CSLSGroup::check_invalid_sock, worker_number=0, publisher=0x106e16000, invalid sock=0, state=2, role_map.size=2.
2020-04-03 11:35:27:786 SLS INFO: [0x7ff47e500478]CSLSMapData::remove, key='uplive.sls.com/live/test123' delete array_data=0x7ff47e403aa0.
2020-04-03 11:35:27:786 SLS INFO: [0x106e16000]CSLSPublisher::uninit, removed publisher from m_map_data, ret=0.
2020-04-03 11:35:27:786 SLS INFO: [0x7ff47e500588]CSLSMapPublisher::remove, publisher=0x106e16000, live_key=uplive.sls.com/live/test123.
2020-04-03 11:35:27:786 SLS INFO: [0x106e16000]CSLSPublisher::uninit, removed publisher from m_map_publisher, ret=0.
2020-04-03 11:35:27:786 SLS INFO: [0x106e16000]CSLSRole::close_hls_file, close ts file='1585884924.ts', fd=7.
2020-04-03 11:35:27:787 SLS INFO: [0x106e16000]CSLSRole::close_hls_file, prepare open '/tmp/mov/sls/8080/uplive.sls.com/live/test123/vod-1585884924.m3u8.extinfo', fd=6.
2020-04-03 11:35:27:788 SLS INFO: [0x106e16000]CSLSRole::close_hls_file, read data len=30, fd=6.
2020-04-03 11:35:27:788 SLS INFO: [0x7ff47e824200]CSLSGroup::check_invalid_sock, worker_number=0, publisher=0x106e16000, delete.
2020-04-03 11:36:00:156 SLS INFO: exit, stop srt live server...
2020-04-03 11:36:00:156 SLS INFO: [0x7ff47e5001a0]CSLSManager::stop.
2020-04-03 11:36:00:156 SLS INFO: [0x106d5f000]CSLSListener::stop.
2020-04-03 11:36:00:156 SLS INFO: [0x106d5f000]CSLSRole::remove_from_epoll, listener, sock=115487778, ret=0.
2020-04-03 11:36:00:156 SLS INFO: [0x106d5f000]CSLSRole::invalid_srt, close sock=115487778, m_state=0.
2020-04-03 11:36:00:156 SLS INFO: [0x7ff47e81c800]CSLSSrt::libsrt_close, fd=115487778.
2020-04-03 11:36:00:156 SLS INFO: [0x7ff47e824200]CSLSGroup::stop, worker_number=0.
2020-04-03 11:36:00:156 SLS INFO: [0x7ff47e824200]CSLSThread::stop, m_th_id=123145556434944.
2020-04-03 11:36:00:158 SLS INFO: [0x106d5f000]CSLSRole::get_state, get_sock_state, ret=-16777216, call invalid_srt.
2020-04-03 11:36:00:158 SLS INFO: [0x7ff47e824200]CSLSGroup::check_invalid_sock, worker_number=0, listener=0x106d5f000, invalid sock=0, state=2, role_map.size=1.
2020-04-03 11:36:00:158 SLS INFO: [0x106d5f000]CSLSListener::stop.
2020-04-03 11:36:00:158 SLS INFO: [0x7ff47e824200]CSLSGroup::check_invalid_sock, worker_number=0, listener=0x106d5f000, delete.
2020-04-03 11:36:00:158 SLS INFO: [0x7ff47e824200]CSLSGroup::clear, worker_number=0, role_map.size=0.
2020-04-03 11:36:00:158 SLS INFO: [0x7ff47e824200]CSLSEpollThread::work, end th_id=123145556434944.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e824200]CSLSGroup::clear, worker_number=0, role_map.size=0.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e824200]CSLSGroup::stop, m_list_wait_http_role.clear, worker_number=0.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e824200]CSLSEpollThread::work, srt_epoll_release ok, m_th_id=0.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e500588]CSLSMapPublisher::clear.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e700008]CSLSMapRelay::clear.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e700118]CSLSMapRelay::clear.
2020-04-03 11:36:00:159 SLS INFO: [0x7ff47e5001a0]CSLSManager::stop, release rolelist, size=0.
2020-04-03 11:36:00:159 SLS INFO: exit, release sls_manager ok.
2020-04-03 11:36:00:159 SLS INFO: exit, release reload_manager_list begin，count=0.
2020-04-03 11:36:00:159 SLS INFO: exit, release reload_manager_list ok.
2020-04-03 11:36:00:159 SLS INFO: exit, release http_stat_client.
2020-04-03 11:36:00:160 SLS INFO: exit, uninit srt .
2020-04-03 11:36:00:170 SLS INFO: exit, close conf.
